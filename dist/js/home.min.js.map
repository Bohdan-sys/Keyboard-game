{"version":3,"file":"home.min.js","mappings":"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","sources":["webpack://vanilla/./src/js/components/popup.ts","webpack://vanilla/./src/js/components/wordBar.ts","webpack://vanilla/./src/js/utils/db.ts","webpack://vanilla/webpack/bootstrap","webpack://vanilla/webpack/runtime/define property getters","webpack://vanilla/webpack/runtime/hasOwnProperty shorthand","webpack://vanilla/webpack/runtime/make namespace object","webpack://vanilla/./src/js/home.ts"],"sourcesContent":["export class Popup {\n    protected targetElement: HTMLElement;\n    private openPopupBtn: HTMLElement;\n\n    constructor(element: HTMLElement) {\n        this.targetElement = element;\n        this.openPopupBtn;\n\n        this.init();\n    }\n\n    protected init() : void {\n        if (this.targetElement) {\n            this.openPopupBtn = document.querySelector('.js-open-popup');\n            this.createEvents();\n        }    \n    }\n\n    protected createEvents(): void {\n        this.targetElement.addEventListener('click', ({ target }) => {\n            if (target === this.targetElement) {\n                this.togglePopup();\n            }\n        });\n\n        this.openPopupBtn?.addEventListener('click', () => this.togglePopup());\n    }\n\n    public togglePopup(): void {\n        this.targetElement.classList.toggle('is-active');\n        document.body.classList.toggle('is-popup-open');\n    }\n}","import { getFromDb } from \"../utils/db\";\nimport { Popup } from \"./popup\";\n\nexport class WordBar extends Popup {\n    private element: HTMLElement;\n    private textElement: HTMLElement;\n    private inputElement: HTMLInputElement;\n    private storage: any;\n    private data: any;\n    private formattedText: string;\n    private timer: any;\n    private timeDelta: number;\n\n    constructor(element: HTMLElement, targetElement: HTMLElement) {\n        super(targetElement)\n        this.element = element;\n        this.textElement;\n        this.inputElement;\n        this.storage = JSON.parse(localStorage.getItem('selectedAricle')) || [];\n        this.data;\n        this.formattedText;\n        this.timer;\n        this.timeDelta;\n      \n        this.init();\n    }\n\n    protected init() : void {\n        if (this.element) {\n            this.textElement = this.element.querySelector('.js-word-bar-text');\n            this.inputElement = this.element.querySelector('.js-word-bar-input');\n\n            this.getData().then(() => {\n                this.shuffleData();\n                this.createEvents();\n            });\n        }    \n    }\n\n    private async getData(): Promise<void>  {\n        if (this.storage) {\n            this.data = await getFromDb(this.storage.id);            \n        }\n    }\n\n    private shuffleData(): void {\n        if (this.data) {\n            this.formattedText = this.data.text.replace(/\\r?\\n/g, '');\n            if (this.storage.randomize) {\n                this.textElement.classList.add('is-random');\n                this.textElement.innerText = this.formattedText = this.formattedText\n                    .split(' ')\n                    .sort(() => Math.random() - 0.5)\n                    .join(' ');\n            } else {\n                this.textElement.innerText = this.formattedText;\n            }\n        }\n    }\n\n    protected createEvents(): void {   \n        this.inputElement?.addEventListener('input', () => this.checkWord(this.inputElement.value));\n    }\n\n    private removeEvents(): void {\n        this.inputElement?.removeEventListener('input', () => this.checkWord(this.inputElement.value));\n    }\n\n    private checkWord(str: string): void {\n        const regex = Date.now();\n        this.textElement.innerHTML = [...this.formattedText]\n        .map((element: string, index: number) => {\n            if (index < str.length) {                    \n                return `<span class=\"${element === str[index] ? 'is-correct' : 'is-error'}\">${element}</span>`;\n            } else {   \n                return element.replace(/^\\s*$/, `${regex}`);\n            }\n        })\n        .join('')\n        .split(`${regex}`)\n        .map((el: string ) => str ? `<span>${el}</span>` : el)\n        .join(' '); \n\n        if (this.storage.randomize) {\n            this.randomMode();\n        }\n\n        this.checkGameStatus();\n        this.calculateWordSize();\n    }\n\n    private calculateWordSize(): void {\n        const character = this.element.querySelector('.js-word-bar-text > span') as HTMLElement;  \n        this.textElement.style.left = `-${character ? character.offsetWidth : 0}px`;  \n    }\n\n    private calculateErrors(): string {\n        const character = [...this.element.querySelectorAll<HTMLElement>('.js-word-bar-text .is-error')];\n        return character.length.toString();\n    }\n\n    private calculateMatches(): string {\n        const character = [...this.element.querySelectorAll<HTMLElement>('.js-word-bar-text .is-correct')];\n        return character.length.toString();\n    }\n\n    private calculateWordsCount(): string {\n        return this.formattedText.split(' ').length.toString();\n    }\n\n    private createTimer(): void {\n        if (this.timer) {\n            const dif = (Date.now() - this.timer) / 1000;\n            this.timeDelta = Math.round(((this.inputElement.value.length * 60 / dif) * 1000) / 1000);\n        } else {\n            this.timer = Date.now();\n        }\n    }\n\n    private checkGameStatus(): void {\n        if (this.inputElement.value.length >= this.formattedText.length) {\n            this.inputElement.disabled = true;\n            this.removeEvents();\n            this.createInfo();\n            this.togglePopup();     \n        } else {\n            this.createTimer();\n        }\n    }\n\n    private randomMode(): void {\n        const character = [...this.element.querySelectorAll<HTMLElement>('.js-word-bar-text span *')];   \n        character.forEach((element, index) => {\n            if (element.textContent.trim() === '') {\n                for (let i = 0; i <= index; i++) {\n                    character[i].classList.add('is-complete');\n                }\n            }\n        });\n    }\n\n    private createInfo(): void {\n        const content = this.targetElement.firstElementChild;\n        const item = `\n            ${this.storage.randomize ?' <p>Game mode : randomize</p>' : ''}\n            <p>Errors count : ${this.calculateErrors()} symbols</p>\n            <p>Matches count : ${this.calculateMatches()} symbols</p>\n            <p>Symbols per minute : ${this.calculateMatches()} symbols</p>\n            <p>Words count : ${this.calculateWordsCount()}</p>\n            <p>Symbols per minute : ${this.timeDelta}</p>\n            `\n        content?.insertAdjacentHTML('beforeend', item);\n    }\n}","export async function getFromDb(id?: string): Promise<any> {\n    try {\n\n        const res = await fetch(`http://localhost:3004/texts/${id ? id : \"\"}`, { method: 'GET' });\n        return res.json();\n    } catch (error) {\n        console.error('Some problems with JSON file', error);\n    }\n}\n\nexport async function addToDb(data: any): Promise<void> {\n    try {\n        await fetch('http://localhost:3004/texts', { \n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            mode: 'cors',\n            body: JSON.stringify(data)\n        });\n    } catch (error) {\n        console.error('Some problems with adding JSON file', error);\n    }\n}\n\nexport async function deleteFromDb(id: string): Promise<void> {\n    try {\n        await fetch(`http://localhost:3004/texts/${id}`, { method: 'DELETE' });\n    } catch (error) {\n        console.error('Some problems with removing from DB', error);\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { WordBar } from \"./components/wordBar\";\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    new WordBar(document.querySelector('.js-word-bar'), document.querySelector('.js-popup'));\n});"],"names":[],"sourceRoot":""}